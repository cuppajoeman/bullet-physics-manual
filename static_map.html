<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bullet Physics: Static Map</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Bullet Physics
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('static_map.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Static Map</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Introduction"></a>
Introduction</h1>
<p>A common task when working with a physics simulation is to have some sort of fixed map, this comes up in most simulations that have gravity so that at least your objects will not just fall forever.</p>
<p>For basic platforms feel free to use any of the built in collision shapes, but in most cases your map may be designed in a 3rd party program such as blender.</p>
<h1><a class="anchor" id="btBVHTriangleMeshShape"></a>
btBVHTriangleMeshShape</h1>
<p>When working with arbitrary geometry like this, the class you'll want to use is <code>btBvhTriangleMeshShape</code>, breaking the name of this function down we can see that we first have Bvh, which stands for "Bounding volume hierarchy", here's a quick description pulled from <a href="https://en.wikipedia.org/wiki/Bounding_volume_hierarchy">wikipedia</a>:</p>
<blockquote class="doxtable">
<p>&zwj;A bounding volume hierarchy (BVH) is a tree structure on a set of geometric objects. All geometric objects, which form the leaf nodes of the tree, are wrapped in bounding volumes </p>
</blockquote>
<p><a href="https://commons.wikimedia.org/wiki/File:Example_of_bounding_volume_hierarchy.svg" title="Schreiberx, CC BY-SA 3.0 &amp;lt;https://creativecommons.org/licenses/by-sa/3.0&amp;gt;, via Wikimedia Commons"><img src="Example_of_bounding_volume_hierarchy_dark_friendly.png" alt="Example of bounding volume hierarchy" width="512" class="inline"/></a></p>
<p>The next part of the name is <a href="https://en.wikipedia.org/wiki/Triangle_mesh">Triangle Mesh</a>.</p>
<p>At this point the name of this function should tell that you that when you use this class you'll have an internal BVH representation for acceleration purposes, it builds this acceleration structure from</p>
<h1><a class="anchor" id="loading_data"></a>
Loading in Data</h1>
<h2><a class="anchor" id="adding_triangles_manually"></a>
Loading Triangles Manually</h2>
<p>Focusing on the signature for this function, we can see that it expects a <code>btStridingMeshInterface</code>, which mentions that that is an "interface class for high performance generic access to triangle meshes", if you don't already know, an interface class is one that's not meant to be initialized. Taking a look at it's inheritance diagram you'll be able to find subclasses that actually provide an implementation for this concept.</p>
<p>The class we'll first focus our attention on is <code>btTriangleMesh</code>. The general process of using a <code>btTriangleMesh</code> is like this:</p><ol type="1">
<li>create a new <code>btTriangleMesh</code></li>
<li>create vertices of triangles add them to the mesh</li>
<li>create a <code>btCollisionShape</code> with <code>btBvhTriangleMeshShape</code> and pass in the triangle mesh we've built up in the previous steps</li>
<li>set up a rigid body with our <code>btCollisionShape</code></li>
</ol>
<p>A sample interaction could look like this:</p>
<div class="fragment"><div class="line"><span class="comment">// 1</span></div>
<div class="line">btVector3 vertex1, vertex2, vertex3, vertex4;</div>
<div class="line">btTriangleMesh* triangleMeshTerrain = <span class="keyword">new</span> btTriangleMesh();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 2 create flat mesh made up of 10x10 squares</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = -250; i &lt; 250; i = i + 10) {</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = -250; j &lt; 250; j = j + 10) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// vertices of a square width side lengths of 10</span></div>
<div class="line">        vertex1 = btVector3(i, 0.0f, j);</div>
<div class="line">        vertex2 = btVector3(i + 10.0f, 0.0f, j);</div>
<div class="line">        vertex3 = btVector3(i + 10.0f, 0.0f, j + 10.0f);</div>
<div class="line">        vertex4 = btVector3(i, 0.0f, j + 10.0f);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// add the two halfs of the square</span></div>
<div class="line">        triangleMeshTerrain-&gt;addTriangle(vertex1, vertex2, vertex3);</div>
<div class="line">        triangleMeshTerrain-&gt;addTriangle(vertex1, vertex3, vertex4);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 3</span></div>
<div class="line">btCollisionShape* collisionShapeTerrain = <span class="keyword">new</span> btBvhTriangleMeshShape(triangleMeshTerrain, <span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 4</span></div>
<div class="line">btDefaultMotionState* motionState = <span class="keyword">new</span> btDefaultMotionState(btTransform(btQuaternion(0, 0, 0, 1), btVector3(0, -15, 0)));</div>
<div class="line"> </div>
<div class="line">btRigidBody::btRigidBodyConstructionInfo rigidBodyConstructionInfo(0.0f, motionState, collisionShapeTerrain, btVector3(0, 0, 0));</div>
<div class="line">btRigidBody* rigidBodyTerrain = <span class="keyword">new</span> btRigidBody(rigidBodyConstructionInfo);</div>
<div class="line">rigidBodyTerrain-&gt;setFriction(btScalar(0.9));</div>
<div class="line"> </div>
<div class="line">m_dynamicsWorld-&gt;addRigidBody(rigidBodyTerrain);</div>
</div><!-- fragment --><h2><a class="anchor" id="obj_files"></a>
Obj Files</h2>
<p>While programatically creating collision shapes can work, we'll need a way to load in arbitrary vertex information so that we can load in assets created by artists and files created in software such as obj files.</p>
<p>Usually you'll load in and parse your data external program or file</p>
<p>check this question: <a href="https://gamedev.stackexchange.com/questions/12925/how-would-i-use-glm-for-bullet-physics">https://gamedev.stackexchange.com/questions/12925/how-would-i-use-glm-for-bullet-physics</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
