<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bullet Physics: Building</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Bullet Physics
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('Building.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Building</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Intro"></a>
Intro</h1>
<p><a href="https://stackoverflow.com/questions/10358745/how-to-use-libraries">https://stackoverflow.com/questions/10358745/how-to-use-libraries</a></p>
<h1><a class="anchor" id="Linux"></a>
Linux</h1>
<h2><a class="anchor" id="using-bullet-directly"></a>
Using Bullet Directly</h2>
<p>If you want to use bullet for the purpose of installing it on your computer from source, or to try out the examples through the example browser, then you want to build the project directly.</p>
<p>A simple way to do this is with cmake, clone the bullet repository, cd into the root of it and run</p>
<div class="fragment"><div class="line">mkdir my_build</div>
<div class="line">cmake -S . -B my_build</div>
<div class="line">cd my_build</div>
<div class="line">cmake --build .</div>
</div><!-- fragment --><h2><a class="anchor" id="using-bullet-as-a-library"></a>
Using Bullet as a Library</h2>
<p>Alternatively you might want to use Bullet as a library in your own programs, for example if you're desinging a game and you want to add physics.</p>
<p>Start in an empty directory and create the directory <code>external_libraries</code> or something along those lines, inside of this directory add bullet as a submodule, if you're not yet familiar with how submodules work, to sum it up they allow you to add another directories as versioned packages and git will not store the files directly. If you don't want to use submodules now, just clone the project here.</p>
<p>For simplicity we will assume you are running linux and using cmake, in this case we just have to set up the following CMakeLists.txt file like so:</p>
<div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.10)</div>
<div class="line"> </div>
<div class="line">project(bullet_as_library)</div>
<div class="line"> </div>
<div class="line">include_directories(external_libraries/bullet3/src) <span class="preprocessor"># (1)</span></div>
<div class="line">add_subdirectory(external_libraries/bullet3) <span class="preprocessor"># (2)</span></div>
<div class="line"> </div>
<div class="line">add_executable(bullet_as_library bal.cpp) </div>
<div class="line"> </div>
<div class="line">target_link_libraries(bullet_as_library BulletDynamics BulletCollision LinearMath) <span class="preprocessor"># (3)</span></div>
</div><!-- fragment --><p>This won't be a tutorial on how cmake works, but we'll mention a few things:</p>
<ol type="1">
<li>adds the src directory as the include directory, this means that when you write something like <code>#include "btBulletDynamicsCommon.h"</code> cpp knows where to find this file.</li>
<li>tells cmake to also build bullet when we build this directory</li>
<li>tells the linker to link the following cmake targets against our project</li>
</ol>
<p>If you're curious about how I knew what the names were for those libraries, look at the structure of the src file in Bullet, you'll find directories with similar names, each of which contain a <code>CMakeLists.txt</code> file and inside you'll find a line like this <code>ADD_LIBRARY(BulletDynamics ${BulletDynamics_SRCS} ${BulletDynamics_HDRS})</code> which defines that as a cmake target for us to reference later on. Also note that the order matters for some reason.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>I believe it has to do with this: <a href="https://stackoverflow.com/questions/45135/why-does-the-order-in-which-libraries-are-linked-sometimes-cause-errors-in-gcc">https://stackoverflow.com/questions/45135/why-does-the-order-in-which-libraries-are-linked-sometimes-cause-errors-in-gcc</a>, but when we know the real reason add the explanation to the end of this paragraph.</dd></dl>
<p>With that set up, you can now move on to the basics section, in the root of your project dir you can now run <code>cmake -S . -B build</code> and <code>cmake --build build</code> to compile your code.</p>
<h3><a class="anchor" id="building-what-you-need"></a>
Building What You need</h3>
<p>You might have noticed that during your build process we built many things, including tests and examples, there are a few reasons you might not want to do this.</p>
<p>First off, while the above example works fine, if you're bringing bullet into an existing codebase, you may run into errors when compiling the examples along with your code because bullet provides third party libraries in the examples, which might overwrite packages that you have, for example I had a glfw project that used glad, and in the examples it also provided an instance of glad, but I got an error saying it that the gladLoader function call was undefined.</p>
<p>Moreover, there is no reason to build examples or to do tests if your goal is to simply use bullet as a third party library as it unessesarily complicates the build and takes longer.</p>
<p>At the moment when we run <code>add_submodule(external_libraries/bullet3/src)</code> it will recursively add any other directories that also contain <code>CMakeLists.txt</code> in them, and if you take a look at the code base you will find many such instances. Therefore an easy way to not build these cmake targets is by renaming the <code>CMakeLists.txt</code> to something like <code>ignore_CMakeLists.txt</code>, then go into the examples and test directory and do that to both <code>CMakeLists.txt</code> you encounter, when you build the library alongside your project you will not build the extraneous targets.</p>
<p>Specifically if you're using the cmake file provided above, then you can do the following:</p>
<ul>
<li>To disable the building of examples rename <code>bullet3/examples/CMakeLists.txt</code> to <code>bullet3/examples/CMakeLists.txt_ignored</code></li>
<li><p class="startli">To disable the building of tests rename <code>bullet3/test/CMakeLists.txt</code> to <code>bullet3/test/CMakeLists.txt_ignored</code></p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>This method of doing things is a little bit ad hoc, maybe we can find a better way of doing it by changing the cmake file instead. If anyone has any ideas let us know</dd></dl>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Manual</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
